<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>F1 2024 Globe Visualizer</title>

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/topojson@3"></script>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <div id="stars"></div>
    <div id="stars2"></div>
    <div id="stars3"></div>

    <section class="sectionWorldMap">
      <div id="map-container">
        <div class="resetButton">↺ Reset View</div>
        <div id="minimap-container"></div>
      </div>

      <div class="infoContainer">
        <h1>F1 2024 Season</h1>

        <div class="circuit-details">
          <div class="circuit-name" id="info-name">--</div>
          <div class="circuit-location" id="info-loc">
            <span>📍</span>
            <span id="info-country">Select a track on the globe</span>
          </div>
        </div>

        <div class="race-results">
          <div class="results-title">2024 Race Podium</div>
          <div id="podium-list">
            <div
              style="
                font-size: 12px;
                color: #666;
                text-align: center;
                padding: 10px;
              "
            >
              Select a red point to see results
            </div>
          </div>
          <div class="weather-info" id="weather-info"></div>
        </div>

        <a
          href="#"
          id="enter-track-btn"
          class="enter-track-btn"
          style="display: none"
          >Enter Track Analysis</a
        >

        <div class="team-list-wrapper">
          <div class="team-list-title">2024 Team Home Tracks</div>
          <div id="team-list-content"></div>
        </div>
      </div>
    </section>

    <section class="trackContainer">
      <div class="analysisHeader">
        <div>
          <div class="analysis-label">Track Analysis</div>
          <h2 id="analysis-title">Selected Track</h2>
          <div id="analysis-location" class="analysis-location"></div>
        </div>
        <div class="Totop">Back to World Map</div>
      </div>

      <div class="analysisContent">
        <div class="analysisLeft">
          <div class="telemetry-card telemetry-stack">
            <div class="card-header">
              <div class="analysis-label">Telemetry Analysis</div>
              <h3 class="card-title">車手進度動畫</h3>
              <p class="card-hint">同步觀看 20 位車手的日本站圈內進度。</p>
              <div id="animation-status" class="animation-status">Loading...</div>
            </div>
            <div class="animationEmbed compact">
              <iframe
                id="telemetry-frame"
                title="Race Animation"
                allowfullscreen
              ></iframe>
              <div
                id="telemetry-placeholder"
                class="animation-placeholder"
                role="alert"
              >
                <p>尚未選擇賽道，請先在地球上點選賽道。</p>
                <p class="placeholder-hint">選取有動畫的賽道後會自動載入。</p>
              </div>
            </div>

            <div class="subsection">
              <div class="subsection-header">
                <div class="analysis-label">TimeCurve Insights</div>
                <h3 class="card-title">鈴鹿 S 彎對比</h3>
                <p class="card-hint">
                  以降維投影呈現 Max、Perez 與角田在 S 彎的操作差異。
                </p>
              </div>
              <div class="timecurve-grid">
                <div class="timecurve-embed">
                  <iframe
                    id="timecurve-primary"
                    title="S-Curve TimeCurve"
                    loading="lazy"
                  ></iframe>
                </div>
                <div class="timecurve-embed">
                  <iframe
                    id="timecurve-secondary"
                    title="Average Style Comparison"
                    loading="lazy"
                  ></iframe>
                </div>
              </div>
              <div id="timecurve-placeholder" class="timecurve-placeholder">
                <p>TimeCurve 圖表目前僅提供日本站資料。</p>
                <p class="placeholder-hint">選取鈴鹿賽道即可自動顯示。</p>
              </div>
            </div>

            <div class="subsection">
              <div class="subsection-header">
                <div class="analysis-label">Consistency Check</div>
                <h3 class="card-title">鈴鹿單圈穩定度</h3>
                <p class="card-hint">
                  逐圈對照 Max、Perez、角田的速度穩定性與趨勢。
                </p>
              </div>
              <div class="consistency-grid">
                <iframe
                  id="consistency-max"
                  title="Max Consistency"
                  loading="lazy"
                ></iframe>
                <iframe
                  id="consistency-perez"
                  title="Perez Consistency"
                  loading="lazy"
                ></iframe>
                <iframe
                  id="consistency-tsunoda"
                  title="Tsunoda Consistency"
                  loading="lazy"
                ></iframe>
              </div>
              <div id="consistency-placeholder" class="timecurve-placeholder">
                <p>穩定度報告僅針對日本站鈴鹿賽道產出。</p>
                <p class="placeholder-hint">選取鈴鹿賽道即可自動顯示。</p>
              </div>
            </div>
          </div>
        </div>

        <div class="analysisRight">
          <div class="animationHeader">
            <div>
              <div class="analysis-label">Race Animation</div>
              <div class="analysis-note">右側區塊保留給其他賽道內容或補充分析。</div>
            </div>
          </div>
          <div class="animationEmbed muted">
            <div class="animation-placeholder">
              <p>主要的車手動畫與 TimeCurve 已移至左側。</p>
              <p class="placeholder-hint">之後可在此加入其他圖表或筆記。</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <script src="worldMap.js"></script>
  </body>
</html>
